<!doctype html>
<html lang="en" class="govuk-template no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>Data Operations Manual - Key Concepts - Planning Data</title>

    <link href="../../stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="digital-land.github.io/data-operations-manual/key-concepts/">

      <meta name="robots" content="noindex" />
      <meta name="twitter:card" content="summary" />
      <meta name="twitter:image" content="digital-land.github.io/images/govuk-large.png" />
      <meta name="twitter:title" content="Data Operations Manual - Key Concepts - Planning Data" />
      <meta name="twitter:url" content="digital-land.github.io/data-operations-manual/key-concepts/" />

      <meta property="og:image" content="digital-land.github.io/images/govuk-large.png" />
      <meta property="og:site_name" content="Planning Data" />
      <meta property="og:title" content="Data Operations Manual - Key Concepts" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="digital-land.github.io/data-operations-manual/key-concepts/" />

    
  </head>

  <body class="govuk-template__body">
    <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>

    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="https://planning.data.gov.uk" class="govuk-header__link govuk-header__link--homepage">
        <span class="govuk-header__product-name">
          Planning Data
        </span>
      </a>
        <strong class="govuk-tag">Beta</strong>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <button type="button" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </button>
        </div>

      <div class="app-pane__body" data-module="in-page-navigation">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents" tabindex="-1" aria-label="Table of contents" role="dialog">
              <div class="search" data-module="search" data-path-to-site-root="../../">
  <form action="https://www.google.co.uk/search" method="get" role="search" class="search__form govuk-!-margin-bottom-4">
    <input type="hidden" name="as_sitesearch" value="digital-land.github.io"/>
    <label class="govuk-label search__label" for="search" aria-hidden="true">
      Search (via Google)
    </label>
    <input
      type="text"
      id="search" name="q"
      class="govuk-input govuk-!-margin-bottom-0 search__input"
      aria-controls="search-results"
      placeholder="Search">
    <button type="submit" class="search__button">Search</button>
  </form>
</div>

              <button type="button" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></button>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading" data-module="collapsible-navigation">
                      <ul>
  <li>
    <a href="../../index.html"><span>Planning Data Service</span></a>
  </li>
  <li>
    <a href="../../documentation/index.html"><span>Documentation</span></a>
  </li>
<li><a href="../../architecture/index.html"><span>Architecture</span></a>
<ul>
  <li>
    <a href="../../architecture/decision-records/index.html"><span>Architecture Decision Records (ADRs)</span></a>
  </li>
<li><a href="../../architecture/design/index.html"><span>Solution design index</span></a>
<ul>
<li><a href="../../architecture/design/latest/index.html"><span>Solution design</span></a>
<ul>
  <li>
    <a href="../../architecture/design/latest/data-pipelines/index.html"><span>Solution design - Data Pipelines</span></a>
  </li>
  <li>
    <a href="../../architecture/design/latest/planning-data-platform/index.html"><span>Solution design - Planning Data Platform</span></a>
  </li>
  <li>
    <a href="../../architecture/design/latest/publish-service/index.html"><span>Solution design - Publish Service</span></a>
  </li>
</ul>
</li>
<li><a href="../../architecture/design/archive/index.html"><span>Solution design archive</span></a>
<ul>
  <li>
    <a href="../../architecture/design/archive/2022-11/index.html"><span>Solution design - November 2022</span></a>
  </li>
</ul>
</li>
<li><a href="../../architecture/design/proposals/index.html"><span>Open Design Proposals</span></a>
<ul>
  <li>
    <a href="../../architecture/design/proposals/template.html"><span>Open Design Proposal - 00X - Title (Template)</span></a>
  </li>
  <li>
    <a href="../../architecture/design/proposals/001-publish-async/index.html"><span>Open Design Proposal 001 - Publish service - Async</span></a>
  </li>
  <li>
    <a href="../../architecture/design/proposals/002-data-pipelines-migration/index.html"><span>Open Design Proposal 002 - Data Pipelines Migration</span></a>
  </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
  <li>
    <a href="../../infrastructure.html"><span>Infrastructure</span></a>
  </li>
<li><a href="../../data-operations-manual/index.html"><span>Data Operations Manual</span></a>
<ul>
  <li>
    <a href="../../data-operations-manual/key-processes/index.html"><span>Key Processes</span></a>
  </li>
  <li>
    <a href="../../data-operations-manual/key-concepts/index.html"><span>Key Concepts</span></a>
  </li>
  <li>
    <a href="../../data-operations-manual/reference/index.html"><span>Reference</span></a>
  </li>
</ul>
</li>
  <li>
    <a href="../../runbook.html"><span>Run Book</span></a>
  </li>
  <li>
    <a href="../../WorkingWithLPA_GIS.html"><span>Working with LPA GIS Systems</span></a>
  </li>
  <li>
    <a href="../../HowTos.html"><span>How-to Guides</span></a>
  </li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled" aria-label="Content" tabindex="0">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
            <h1 id="key-concepts">Key Concepts</h1>
<p>We have a number of different Collections of data, such as <a href="https://digital-land.github.io/specification/specification/conservation-area/">Conservation Areas (CA)</a>. The data and configuration for each Collection is stored in Github. For example, the CA repository is at <a href="https://github.com/digital-land/conservation-area-collection"><code>https://github.com/digital-land/conservation-area-collection</code></a>.</p>
<p>In each Collection there is a <code>collection</code> folder that contains some key files that control the collection of data from LPAs and other publishers. The first two to look at are <code>source.csv</code> and <code>endpoint.csv</code>.</p>
<h3 id="source">Source</h3>
<p>the source.csv file lists all of the publishers we have data for in this Collection:</p>
<div class="table-container">
        <table>
          <tr>
<th>Field</th>
<th>Usage</th>
</tr><tr>
<td>source</td>
<td>Identifier for this row in the file</td>
</tr><tr>
<td>attribution</td>
<td>Statement about the source of the data</td>
</tr><tr>
<td>collection</td>
<td>Repeats the name of the thing we are collecting.</td>
</tr><tr>
<td>documentation-url</td>
<td>The web link to the providers documentation about the data</td>
</tr><tr>
<td>endpoint</td>
<td>A link to a line in the endpoint CSV (see below)</td>
</tr><tr>
<td>licence</td>
<td>The kind of license</td>
</tr><tr>
<td>organisation</td>
<td>A short code linking to the <a href="https://datasette.planning.data.gov.uk/digital-land?sql=select+entity%2C+name%2C+organisation%2C+website+from+organisation+order+by+organisation+limit+100">organisation</a> table</td>
</tr><tr>
<td>pipelines</td>
<td>What specific data we are getting from the endpoint</td>
</tr><tr>
<td>entry-date</td>
<td>When the record was added</td>
</tr><tr>
<td>start-date</td>
<td>When the record becomes active</td>
</tr><tr>
<td>end-date</td>
<td>When the record becomes inactive</td>
</tr>
        </table>
      </div><h3 id="endpoint">Endpoint</h3>
<div class="table-container">
        <table>
          <tr>
<th>Field</th>
<th>Usage</th>
</tr><tr>
<td>endpoint</td>
<td>Identifier for this row in the file</td>
</tr><tr>
<td>endpoint-url</td>
<td>Link to the data itself</td>
</tr><tr>
<td>parameters</td>
<td>(unused?)</td>
</tr><tr>
<td>plugin</td>
<td>We have different plugins for reading different kinds of data.</td>
</tr><tr>
<td>entry-date</td>
<td>The date we added this record to the system</td>
</tr><tr>
<td>start-date</td>
<td>When the download becomes valid</td>
</tr><tr>
<td>end-date</td>
<td>When the download stops being valid</td>
</tr>
        </table>
      </div><p><strong><em>NOTE</em></strong>: The relationship between Source and Endpoint does not follow a traditional entity-relationship 1:M model. Every time we add a new Endpoint for an organisation+Collection, we add a new Source as well, referencing that endpoint.</p>
<h3 id="entity">Entity</h3>
<p>Data gets imported and eventually emerges as an Entity. This is used as a catch-all <a href="https://datasette.planning.data.gov.uk/entity?sql=select+dataset%2C+end_date%2C+entity%2C+entry_date%2C+geojson%2C+geometry%2C+json%2C+name%2C+organisation_entity%2C+point%2C+prefix%2C+reference%2C+start_date%2C+typology%2C+geometry_geom%2C+point_geom+from+entity+where+entity+%3E+12345+order+by+entity+limit+101">record</a> for pretty much everything we hold.</p>
<p>Each entity has a field called <code>entity</code> which is its identifier. Another important field is the <code>reference</code> which is what the data publisher uses to refer to the thing we are holding information about. The rest of the fields act as you might expect with the exception of the entry_date field.</p>

<blockquote>
<p><strong><em>entry_date</em></strong>: Normally in this system, entry_date is the date upon which a record was added to the system. A bit like _<em>created_date</em> in other systems. However, for data we import from a publisher, it can <strong>either</strong> be the date we imported it, <strong>or</strong> a date value provided by the publisher. We have no way of distinguishing between those two cases.</p>
</blockquote>
<h3 id="lookups">Lookups</h3>
<p>Now you know about Entity, we can look at another file, <code>lookup.csv</code> in the <a href="https://github.com/digital-land/conservation-area-collection/blob/main/pipeline/lookup.csv"><code>pipeline</code></a> folder.</p>
<p>There is a complex relationship between Entities we hold. Some entities give us data. Other entities ARE the things you see on the map. Sometimes more than one publisher gives us information about a single thing on the map. To manage this complexity we have a table called Lookup which maps from &lsquo;what the provider calls a thing&rsquo; to our entity.</p>
<p>This relationship occasionally requires manual intervention, but for the time being you just need to understand that allocating &lsquo;entity&rsquo; identifier values for stuff we import is an operation done when we import the data rather than something done by a database.</p>
<div class="table-container">
        <table>
          <tr>
<th>Field</th>
<th>Usage</th>
</tr><tr>
<td>prefix</td>
<td>The dataset this entity is a part of</td>
</tr><tr>
<td>resource</td>
<td>(not used?)</td>
</tr><tr>
<td>organisation</td>
<td>Who has data referring to this entity</td>
</tr><tr>
<td>reference</td>
<td>And what they use as a reference when talking about this entity</td>
</tr><tr>
<td>entity</td>
<td>What <strong>we</strong> use to talk about the entity</td>
</tr>
        </table>
      </div><p>As you can see, this gives us a Many-to-One relationship between organisation and entity.</p>
<h4 id="plugins">Plugins</h4>
<p>Most publishers either give us link to a CSV file or a link to an <code>HTTP get</code> that returns data in a geographical format. The <a href="https://github.com/digital-land/digital-land-python/tree/main/digital_land/plugins">plugin</a> converts the data to a csv format we can use in the rest of the ingest process.</p>

            
          </main>

          <aside>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">


      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="../../javascripts/application.js"></script>
  </body>
</html>
